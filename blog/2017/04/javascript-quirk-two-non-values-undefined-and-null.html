<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>
     理解 undefined 和 null - 沉默的大树 
  </title>
  <link rel="stylesheet" href="/css/style.css">
  <link rel="shortcut icon" href="/img/favicon.png" type="image/x-icon">
</head>

<body>
  <div id="layout">
    <a href="#menu" id="menuLink" class="menu-link">
      <span></span>
    </a>
    <div id="menu">
      <a class="pure-menu-header" href="https://cmdtree.com">沉默的大树</a>
      <div class="pure-menu">
        <ul class="pure-menu-list">
          <li class="pure-menu-item">
            <a class="pure-menu-link" href="https://cmdtree.com">
              Home</a>
          </li>
          <li class="pure-menu-item">
            <a class="pure-menu-link" href="/about.html">
              </i>About</a>
          </li>
          <li class="pure-menu-item">
            <a class="pure-menu-link" href="/contact.html">
              </i>Contact</a>
          </li>
          <!--
              <li class="pure-menu-item">
                <a class="pure-menu-link" href="https://cmdtree.com/index.xml">
                  <i class="fa fa-rss fa-fw"></i>RSS</a>
              </li> -->
          <li class="pure-menu-item">
            <a class="pure-menu-link" href="https://github.com/rhatyang" target="_blank">
              </i>GitHub</a>
          </li>
        </ul>
        <ul class="pure-menu-list category-list">
          
          <li class="pure-menu-item">
            <a class="pure-menu-link" href="https://cmdtree.com/blog/network.html">网络技术与安全
              <span>(9)</span>
            </a>
          </li>
          
          <li class="pure-menu-item">
            <a class="pure-menu-link" href="https://cmdtree.com/blog/use.html">使用笔记
              <span>(47)</span>
            </a>
          </li>
          
          <li class="pure-menu-item">
            <a class="pure-menu-link" href="https://cmdtree.com/blog/learn.html">学习笔记
              <span>(29)</span>
            </a>
          </li>
          
          <li class="pure-menu-item">
            <a class="pure-menu-link" href="https://cmdtree.com/blog/history.html">历史爱好者
              <span>(3)</span>
            </a>
          </li>
          
          <li class="pure-menu-item">
            <a class="pure-menu-link" href="https://cmdtree.com/blog/lifetime.html">晃眼一生
              <span>(17)</span>
            </a>
          </li>
          
          <li class="pure-menu-item">
            <a class="pure-menu-link" href="https://cmdtree.com/blog/linux.html">Unix/Linux
              <span>(15)</span>
            </a>
          </li>
          
          <li class="pure-menu-item">
            <a class="pure-menu-link" href="https://cmdtree.com/blog/javascript.html">JavaScript
              <span>(36)</span>
            </a>
          </li>
          
          <li class="pure-menu-item">
            <a class="pure-menu-link" href="https://cmdtree.com/blog/other.html">杂文
              <span>(5)</span>
            </a>
          </li>
          
          <li class="pure-menu-item">
            <a class="pure-menu-link" href="https://cmdtree.com/blog/review.html">观后感
              <span>(2)</span>
            </a>
          </li>
          
          <li class="pure-menu-item">
            <a class="pure-menu-link" href="https://cmdtree.com/blog/python.html">Python
              <span>(2)</span>
            </a>
          </li>
          
        </ul>
      </div>
      <div class="menu-footer">
        <div class="small-print copyright">
          © 2018. All rights reserved.
        </div>
        <div class="small-print powered">
          Powered by Node.js. Open Source on
          <a href="https://github.com/rhatyang/cmdtree" target="_blank">Github</a>.
        </div>
        <div class="small-print">
          所有内容根据
          <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank">CC BY 4.0</a>
          协议进行开源
        </div>
        <div class="last-updated small-print">
          最后一次更新在：2018年3月4日
        </div>
      </div>
    </div>
    <div id="main">
      
<article class="content page" itemscope itemtype="http://schema.org/Blogpageing">
  <div class="page-header">
    <h1 class="page-title">理解 undefined 和 null</h1>
    <div class="page-meta">
      <p><time datetime="2017-04-01" itemprop="datePublished">日期：2017年04月01日</time></p>
      <span class="post-category">分类：JavaScript</span>
    </div>
  </div>
  <div class="page-content" itemprop="articleBody">
    <p>对于“空值”或“空引用”，大多数编程语言只有一个值。比如，在 Java 中用的是 <code>null</code>。</p>
<p>但是在 Javascript 中却有两个特殊的值: <code>undefined</code> 和 <code>null</code>。</p>
<p>他们基本上是相同，但用法上却略有些不同。</p>
<p><code>undefined</code> 是被语言本身所分配的。</p>
<p>如果一个变量还没有被初始化，那么它的值就是 <code>undefined</code>:</p>
<pre><code class="hljs">&gt; var foo;
&gt; foo
undefined
</code></pre>
<p>同理，当缺失参数时 JavaScript 会分配一个 <code>undefined</code>：</p>
<pre><code class="hljs">&gt; function id(x) { return x }
&gt; id()
undefined
</code></pre>
<p><code>null</code> 是被开发者用来明确指出某个值是缺失的，
例如，对于 <a href="https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify">JSON.stringify()</a>:</p>
<pre><code class="hljs">&gt; console.log(JSON.stringify({ first: 'Jane' }, null, 4))
{
  &quot;first&quot;: &quot;Jane&quot;
}
</code></pre>
<p>校检：一个变量是否有值？</p>
<p>如果你想知道变量 <code>v</code> 是否有值，正常情况下，你需要同时检验 <code>undefined</code> 与 <code>null</code>。</p>
<p>幸运的是两个值都是 <a href="http://justjavac.com/javascript/2013/04/08/javascript-quirk-1-implicit-conversion-of-values.html">false 型</a>。</p>
<p>因此，只用一个判断，就可以同时检验这两项是否为真:</p>
<pre><code class="hljs javascript"><span class="hljs-keyword">if</span> (v) {
    <span class="hljs-comment">// v 有值</span>
} <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// v 没有值</span>
}
</code></pre>
<p>在本 <a href="http://justjavac.com/javascript/2013/04/08/12-javascript-quirks.html" title="javascript 的 12 个怪癖（quirks）">系列</a> 的第 5 部分——关于函数参数的处理——你将会看到更多的上面校检例子。</p>
<p>有一点要注意的是：这个检查也会把 <code>false</code>, <code>-0</code>, <code>+0</code>, <code>NaN</code> 与 '' 当成“空值”。</p>
<p>如果这不是你想要的，那么就不能使用上面的校检方法了。</p>
<p>你有两个选择。</p>
<p>有些人提倡使用不等于（<code>!=</code>）来校检 v 既不是 <code>undefined</code> 或 <code>null</code>:</p>
<pre><code class="hljs javascript"><span class="hljs-keyword">if</span> (v != <span class="hljs-literal">null</span>) {
    <span class="hljs-comment">// v 有值</span>
} <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// v 没有值</span>
}
</code></pre>
<p>不过，这要求你要明白 <code>!=</code> 认为 <code>null</code> 只等于它自己或是 <code>undefined</code>。</p>
<p>我喜欢用更有可读性的 <code>!==</code>:</p>
<pre><code class="hljs javascript"><span class="hljs-keyword">if</span> (v !== <span class="hljs-literal">undefined</span> &amp;&amp; v !== <span class="hljs-literal">null</span>) {
    <span class="hljs-comment">// v 有值</span>
} <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// v 没有值</span>
}
</code></pre>
<p><a href="http://jsperf.com/definedness">性能方面</a>，所有在这个章节中提到的这三个校检基本是相同的。</p>
<p>所以，最后用哪个取决于你的需求还有你的品味。</p>
<p>一些压缩工具甚至用 <code>!=</code> 重写了最后一条校检。</p>

  </div>
</article>

    </div>
  </div>
  <script src="/js/ui.js"></script>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-113894191-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
      dataLayer.push(arguments);
    }
    gtag('js', new Date());
    gtag('config', 'UA-113894191-1');

  </script>
</body>

</html>
